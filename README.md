# 热力图
# ​​数据加载​​
- 首先尝试以CSV格式读取数据文件。
- 如果CSV读取失败，尝试以Excel格式读取（根据之前的错误信息，可能是文件类型问题）。
- 如果两种方式都失败，抛出异常提示。
# ​​数据基本信息
- 使用 data.info() 查看数据的基本结构，包括每列的数据类型和非空值数量。
- 使用 data.isnull().sum() 查看每列的缺失值数量。
# ​​数据清洗​​:
- 删除所有值均为缺失值的列。
- 选择关键列（如 City Name, Package, Variety, Date, Low Price, High Price），并删除这些列中存在缺失值的行。
- 将 Date 列转换为 datetime 格式，以便后续时间序列分析（如果需要）。
# ​​​​探索性数据分析 (EDA)​​:
- 绘制数值变量的分布直方图，帮助了解数据的分布情况。
- 绘制数值变量的箱线图，识别可能的异常值。
- 绘制数值变量之间的相关性热力图，了解变量间的相关性。
# ​​特征处理与模型构建​​:
- 选择缺失值少于50%的列作为特征，以减少缺失值对模型的影响。
- 选择 Low Price 作为目标变量，尝试预测南瓜的最低价格。
- 对分类变量进行独热编码（One-Hot Encoding），以便模型能够处理分类数据。
- 移除任何 datetime 类型的列，因为这些类型的数据无法直接用于线性回归模型。
- 将数据集划分为训练集和测试集，比例为80%训练，20%测试。
- 使用线性回归模型进行训练，并在测试集上进行预测。
- 评估模型性能，计算均方误差（MSE）和决定系数（R²）。
# ​​绘制特征热力图​​:
- 计算特征之间的相关性矩阵。
- 使用热力图可视化特征之间的相关性，帮助识别哪些特征对目标变量影响较大。
# 实验结果
<img width="1096" alt="d23307aab89f37e56c56238a785aa63" src="https://github.com/user-attachments/assets/bab5060f-e4e2-45e7-8102-42676016140e" />  

展示了四个关键价格相关变量的分布情况，通过叠加了密度曲线的柱状图可以清晰看到"Low Price"和"Mostly Low"在较低数值区间呈现明显的集中分布趋势，而"High Price"和"Mostly High"则在较高数值区间有更多的数据分布，这种分布模式直观反映了不同价格类别的数值特征差异，其中蓝色柱状图显示频数分布，叠加的蓝色密度曲线则揭示了数据的概率密度分布形态。  

<img width="1118" alt="06df36e7f485232975afc5553c879df" src="https://github.com/user-attachments/assets/6b870c7d-b82c-4ae6-a01b-bbe94005ff97" />  

四个并列箱线图系统比较了相同四个价格变量的统计分布特征，从箱线图可以观察到各变量的中位数位置、四分位距范围以及异常值分布情况，"Low Price"和"Mostly Low"的中位数明显低于"High Price"和"Mostly High"，同时前两者的箱线图整体位于较低数值区域，后两者则集中在较高数值区间，这种对比清晰展示了不同价格类别的统计差异，异常值则以圆点形式标注在须线之外。  

<img width="600" alt="55c28d701ddb3d84c4afaf38c12ab17" src="https://github.com/user-attachments/assets/5d5e8792-0635-4c9a-989f-268e980c317d" />  

相关性热力图揭示了四个价格变量之间的高度相关性，所有相关系数都处于0.988到1.00之间，颜色从蓝色到红色的渐变中可以看到几乎全部单元格都呈现深红色，表明这些变量之间存在极强的正相关关系，这种高度一致性说明这些价格指标在测量南瓜价格时具有高度的一致性，可能反映的是同一价格特征的不同测量维度。  

<img width="900" alt="d53dd2d4b0e308e3b97493a48de5f31" src="https://github.com/user-attachments/assets/35d6e692-3a49-4a28-9852-4233a6d0f3c4" />  

特征热力图展示了模型中使用的多个特征之间的相关性关系，图中包含价格特征、城市名称、物品颜色、尺寸、产地和包装类型等多种特征，通过颜色深浅可以识别出某些特征组合存在显著的相关性，比如特定城市名称与其他特征之间呈现明显的红色或蓝色区域，表明这些特征之间存在较强的正相关或负相关关系。  

<img width="203" alt="74d4372607844a2664364c961e76ed8" src="https://github.com/user-attachments/assets/845cb87e-2fd2-42a8-ae8c-7d8367e26651" />  

模型评估结果直接展示了线性回归模型的性能指标，其中均方误差(MSE)为26.3810，决定系数(R²)达到0.9950，接近1的R²值表明模型对目标变量的解释能力极强，预测值与实际值之间的平均平方误差也控制在合理范围内。



